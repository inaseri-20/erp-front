<app-page-header [pageTitle]="'ایجاد دپارتمان'"
                 [firstButtonIcon]="'arrow_back'"
                 (firstButtonAction)="router.navigate(['/admin/dashboard'])">
</app-page-header>


<div class='row'>

  <div class='col-md-10 col-12 mx-auto'>

    <form [formGroup]='departmentForm' (ngSubmit)='submit()'>

      <mat-card>

        <mat-card-content>

          <div class='row'>

            <div class='col-md-6 col-12'>
              <mat-form-field appearance='outline' class='w-100'>
                <mat-label>نام دپارتمان</mat-label>
                <input matInput formControlName='title' required>
              </mat-form-field>
            </div>

            <div class='col-md-6 col-12'>
              <mat-form-field appearance='outline' class='w-100'>
                <mat-label>توضیحات</mat-label>
                <input matInput formControlName='description'>
              </mat-form-field>
            </div>

          </div>

          <div class='row'>
            <div class='col-md-6 col-12'>
              <button mat-raised-button color='primary' type='submit'>ثبت</button>
            </div>
          </div>

        </mat-card-content>

      </mat-card>

    </form>

  </div>

</div>

<div class='row my-3'>

  <div class='col-md-10 col-12 mx-auto'>

    <mat-selection-list #departmentList>
      <div mat-subheader>دپارتمان ها</div>
      <mat-list-option *ngFor='let department of departments' [value]='department.id'>
        <mat-icon mat-list-icon>folder</mat-icon>
        <div mat-line>{{department?.title}}</div>
        <div mat-line> {{departments?.description || 'توضیحاتی ثبت نشده'}} </div>
      </mat-list-option>
    </mat-selection-list>

  </div>

</div>

<div class='row my-3' *ngIf='departmentList.selectedOptions.selected.length > 0'>

  <div class='col-md-10 col-12 mx-auto'>
    <h3 class='my-2'>تعداد موارد انتخاب شده: {{departmentList.selectedOptions.selected.length}}</h3>
    <button mat-raised-button color='warn' (click)='deleteSelectedDepartment()'>حذف موارد انتخاب شده</button>
  </div>

</div>
