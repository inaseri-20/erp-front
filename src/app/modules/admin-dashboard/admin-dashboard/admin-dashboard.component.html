<app-no-data *ngIf='projects.length === 0 && !projects'
             [newDataTitle]="'ثبت اولین پروژه'"
             (addNewData)="router.navigate(['/admin/dashboard/project/create'])">
</app-no-data>


<app-page-header [pageTitle]="'ایجاد پروژه'"
                 [firstButtonTooltip]="'ایجاد پروژه جدید'"
                 [firstButtonIcon]="'work'"
                 [secondButtonIcon]="'local_fire_department'"
                 [secondButtonTooltip]="'ایجاد دپارتمان جدید'"
                 (firstButtonAction)="router.navigate(['/admin/dashboard/project/create'])">
</app-page-header>


<div class='row mt-3'>
  <div class='col-md-10 col-12 mx-auto'>

    <div class='row'>

      <div class='col-md-4 col-12 mt-3' *ngFor='let project of projects'>

        <a [routerLink]="['/admin/dashboard/project/create']"
           [queryParams]='{projectId: project.id}'
           class='text-decoration-none'>

          <mat-card class='shadow shadow-sm border rounded-3'>

            <mat-card-content>

              <div class='d-flex align-items-center'>
                <div class='project-avatar'>
                  <h1
                    class='text-white text-center d-flex align-items-center align-content-center h-100 justify-content-center mt-1'>
                    {{project.title.charAt(0)}}</h1>
                </div>
                <div class='d-block ms-2'>
                  <h2 class='m-0'>{{project.title}}</h2>
                  <span class=' text-muted'>{{project.description || 'توضیحاتی ثبت نشده است'}}</span>
                </div>
                <div class='status-avatar ms-auto mb-auto'
                     [matTooltip]='project.status_name'
                     [ngStyle]="{'background': project.status_color}"></div>
              </div>

              <div class='d-block mt-2'>
                <div class='d-flex align-items-center'>
                  <button mat-icon-button matTooltip='دپارتمان'>
                    <mat-icon class='text-muted'>local_fire_department</mat-icon>
                  </button>
                  <span class='text-muted'>{{project.department_name}}</span>
                </div>
              </div>

              <div class='d-flex align-items-center mt-2'>
                <div class='d-flex align-items-center'>
                  <button mat-icon-button matTooltip='محدودیت زمانی'>
                    <mat-icon class='text-danger'>notifications_active</mat-icon>
                  </button>
                  <span class='text-danger'>{{project.dead_line | persianDate}}</span>
                </div>

                <div class='d-flex align-items-center mx-auto'>
                  <button mat-icon-button matTooltip='تاریخ شروع'>
                    <mat-icon class='text-success'>not_started</mat-icon>
                  </button>
                  <span class='text-success'>{{project.start_date | persianDate}}</span>
                </div>
              </div>


            </mat-card-content>

          </mat-card>

        </a>

      </div>

    </div>

  </div>
</div>
